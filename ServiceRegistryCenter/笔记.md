如何实现微服务架构中的服务发现     http://www.tuicool.com/articles/A7VFra7
    为什么使用服务发现？
 服务实例的网络地址是动态分配的。而且，由于自动扩展，失败和更新，服务实例的配置也经常变化。
 这样一来，你的客户端代码需要一套更精细的服务发现机制。
 
 有两种主要的服务发现模式：客户端服务发现（client-side discovery）和服务器端服务发现（ server-side discovery ）
 
 客户端服务发现模式
 当使用客户端服务发现的时候，客户端负责决定可用的服务实例的网络地址，以及围绕他们的负载均衡。
 客户端向服务注册表（ service registry ）发送一个请求，服务注册表是一个可用服务实例的数据库。
 客户端使用一个负载均衡算法，去选择一个可用的服务实例，来响应这个请求.
 一个服务实例被启动时，它的网络地址会被写到注册表上；当服务实例终止时，再从注册表中删除。
 这个服务实例的注册表通过心跳机制动态刷新。
 
 服务器端服务发现模式
 客户端通过负载均衡器向一个服务发送请求，这个负载均衡器会查询服务注册表，并将请求路由到可用的服务实例上。
 通过客户端的服务发现，服务实例在服务注册表上被注册和注销。
 
 总结
 服务发现的关键部分是服务注册表。服务注册表是一个可用的服务实例的数据库。服务注册表提供了一个管理API和一个查询API。服务实例的注册和注销通过管理API实现，查询API用来寻找可用的服务实例。
 
 有两种主要的服务发现模式：客户端服务发现和服务器端服务发现。客户端服务发现系统中，客户端查询服务注册表，选择一个可用的实例，响应一个请求；在服务器端服务发现系统中，客户端通过一个路由器发送请求，这个路由器会去查询服务注册表，并将请求发送给可用的实例。
 
 有两种形式可以实现服务实例的注册和注销，一种是self-registration模式，一种是third-party registration模式。
 
 
 
 
 
